(this["webpackJsonpgoit-react-hw-03-phonebook"]=this["webpackJsonpgoit-react-hw-03-phonebook"]||[]).push([[7],{19:function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return j}));var r=n(8),c=n.n(r),a=n(16),u=n(4),o=n(15),i=n.n(o),s=n(53),l="https://connections-api.herokuapp.com",b=Object(u.c)("contacts/fetchPhoneBookContacts",Object(a.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("".concat(l,"/contacts"));case 3:return e=t.sent,n=e.data,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(0),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))),f=Object(u.c)("contacts/addPhoneBookContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.getState().contacts.items.some((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))){t.next=4;break}return s.Notify.warning("".concat(e.name," is already in your contacts")),t.abrupt("return",n.rejectWithValue("Naming conflict: user *".concat(e.name,"* already exists")));case 4:return t.prev=4,t.next=7,i.a.post("".concat(l,"/contacts"),e);case 7:return r=t.sent,a=r.data,t.abrupt("return",a);case 12:throw t.prev=12,t.t0=t.catch(4),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(u.c)("contacts/removePhoneBookContact",function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i.a.delete("".concat(l,"/contacts/").concat(e)),t.abrupt("return",e);case 5:throw t.prev=5,t.t0=t.catch(0),new Error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())},36:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a}));var r=function(t){return t.auth.isLoggedIn},c=function(t){return t.auth.user.name},a=function(t){return t.auth.isFetchingCurrent}},50:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),c=(Object(r.b)("contact/add"),Object(r.b)("contact/delete"),Object(r.b)("set/filter"))},6:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return p}));var r=n(8),c=n.n(r),a=n(16),u=n(4),o=n(15),i=n.n(o),s="https://connections-api.herokuapp.com",l=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){i.a.defaults.headers.common.Authorization=""},f=Object(u.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("".concat(s,"/users/login"),e);case 3:return n=t.sent,r=n.data,l(r.token),t.abrupt("return",r);case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(u.c)("auth/logout",Object(a.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("".concat(s,"/users/logout"));case 3:return e=t.sent,n=e.data,b(),t.abrupt("return",n);case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),d=Object(u.c)("auth/signup",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("".concat(s,"/users/signup"),e);case 3:return n=t.sent,r=n.data,l(r.token),t.abrupt("return",r);case 9:throw t.prev=9,t.t0=t.catch(0),new Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),p=Object(u.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),a=r.auth.token){t.next=4;break}return t.abrupt("return",n.rejectWithValue("User is logged out"));case 4:return l(a),t.prev=5,t.next=8,i.a.get("".concat(s,"/users/current"));case 8:return u=t.sent,o=u.data,t.abrupt("return",o);case 13:throw t.prev=13,t.t0=t.catch(5),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},60:function(t,e,n){},89:function(t,e,n){"use strict";n.r(e);var r,c,a,u,o,i,s,l=n(0),b=n.n(l),f=n(28),j=n.n(f),d=(n(60),n(47)),p=n(48),O=n(37),h=n(5),v=n(23),x=n(6),w=n(36),g=n(1),m=Object(l.lazy)((function(){return n.e(1).then(n.bind(null,102))})),k=Object(l.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,104))})),y=Object(l.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,105))})),E=Object(l.lazy)((function(){return Promise.all([n.e(0),n.e(10),n.e(2)]).then(n.bind(null,101))})),z=Object(l.lazy)((function(){return n.e(4).then(n.bind(null,106))})),C=Object(l.lazy)((function(){return n.e(5).then(n.bind(null,107))})),P=function(){var t=Object(v.b)(),e=Object(v.c)(w.a);return Object(l.useEffect)((function(){t(Object(x.a)())}),[t]),Object(g.jsx)(g.Fragment,{children:!e&&Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(l.Suspense,{fallback:Object(g.jsx)("h1",{children:"LOADING..."}),children:[Object(g.jsx)(m,{}),Object(g.jsx)(d.a,{children:Object(g.jsx)(p.a,{children:Object(g.jsx)(O.a,{children:Object(g.jsxs)(h.d,{children:[Object(g.jsx)(C,{path:"/register",restricted:!0,exact:!0,children:Object(g.jsx)(k,{})}),Object(g.jsx)(C,{path:"/login",restricted:!0,exact:!0,children:Object(g.jsx)(y,{})}),Object(g.jsx)(z,{path:"/contacts",exact:!0,children:Object(g.jsx)(E,{})}),Object(g.jsx)(h.a,{to:"/login"})]})})})})]})})})},B=n(7),L=n(4),A=n(2),I=n(22),N=n(50),S=n(19),F=Object(L.d)([],(r={},Object(A.a)(r,S.b.fulfilled,(function(t,e){return e.payload})),Object(A.a)(r,S.a.fulfilled,(function(t,e){return[].concat(Object(I.a)(t),[e.payload])})),Object(A.a)(r,S.c.fulfilled,(function(t,e){return Object(I.a)(t).filter((function(t){return t.id!==e.payload}))})),r)),J=Object(L.d)("",Object(A.a)({},N.a,(function(t,e){return e.payload}))),V=Object(L.d)([],(c={},Object(A.a)(c,S.b.rejected,(function(t,e){return[].concat(Object(I.a)(t),[e.error])})),Object(A.a)(c,S.a.rejected,(function(t,e){return[].concat(Object(I.a)(t),[e.error])})),Object(A.a)(c,S.c.rejected,(function(t,e){return[].concat(Object(I.a)(t),[e.error])})),c)),W=Object(B.b)({items:F,filter:J,error:V}),D=Object(L.d)({},(a={},Object(A.a)(a,x.d.fulfilled,(function(t,e){return e.payload.user})),Object(A.a)(a,x.b.fulfilled,(function(t,e){return e.payload.user})),Object(A.a)(a,x.c.fulfilled,(function(){return[]})),Object(A.a)(a,x.a.fulfilled,(function(t,e){return e.payload})),a)),G=Object(L.d)(null,(u={},Object(A.a)(u,x.d.fulfilled,(function(t,e){return e.payload.token})),Object(A.a)(u,x.b.fulfilled,(function(t,e){return e.payload.token})),Object(A.a)(u,x.c.fulfilled,(function(){return null})),u)),M=Object(L.d)(!1,(o={},Object(A.a)(o,x.d.fulfilled,(function(){return!0})),Object(A.a)(o,x.b.fulfilled,(function(){return!0})),Object(A.a)(o,x.c.fulfilled,(function(){return!1})),Object(A.a)(o,x.a.fulfilled,(function(){return!0})),o)),T=Object(L.d)(!1,(i={},Object(A.a)(i,x.a.pending,(function(){return!0})),Object(A.a)(i,x.a.fulfilled,(function(){return!1})),Object(A.a)(i,x.a.rejected,(function(){return!1})),i)),U=Object(L.d)([],(s={},Object(A.a)(s,x.b.rejected,(function(t,e){return t})),Object(A.a)(s,x.c.rejected,(function(t,e){return t})),Object(A.a)(s,x.d.rejected,(function(t,e){return t})),Object(A.a)(s,x.b.pending,(function(t,e){return t})),Object(A.a)(s,x.c.pending,(function(t,e){return t})),Object(A.a)(s,x.d.pending,(function(t,e){return t})),s)),q=Object(B.b)({user:D,token:G,isLoggedIn:M,isFetchingCurrent:T,err:U}),H=n(34),K=n(54),Q={key:"auth",storage:n.n(K).a,whitelist:["token","user"]},R=Object(B.b)({contacts:W,auth:Object(H.a)(Q,q)}),X=Object(L.a)({reducer:R,devTools:!1}),Y=Object(H.b)(X),Z=n(51),$=n(55);n(88);j.a.render(Object(g.jsx)(b.a.StrictMode,{children:Object(g.jsx)(v.a,{store:X,children:Object(g.jsx)($.a,{loading:null,persistor:Y,children:Object(g.jsx)(Z.a,{children:Object(g.jsx)(P,{})})})})}),document.getElementById("root"))}},[[89,8,9]]]);
//# sourceMappingURL=main.e02fcfcc.chunk.js.map